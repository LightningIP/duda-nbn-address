define(["exports","../../../../vue/dist/vue.runtime.esm-bundler","./VOverlay.css","./locationStrategies","./scrollStrategies","./useActivator","../../composables/color","../../composables/component","../../composables/dimensions","../../composables/hydration","../../composables/lazy","../../composables/locale","../../composables/proxiedModel","../../composables/router","../../composables/scopeId","../../composables/stack","../../composables/teleport","../../composables/theme","../../composables/toggleScope","../../composables/transition","../../directives/click-outside/index","../../util/index","../../../../@vue/runtime-core/dist/runtime-core.esm-bundler","../../../../@vue/runtime-dom/dist/runtime-dom.esm-bundler","../../util/propsFactory","../../util/defineComponent","../../util/getCurrentInstance","../../../../@vue/reactivity/dist/reactivity.esm-bundler","../../util/globals","../../util/getScrollParent","../../util/animation","../../util/easing","../../util/useRender","../../util/helpers"],function(f,Ne,Re,P,V,O,F,j,E,G,h,U,W,w,H,K,q,T,C,N,J,pe,a,R,Q,X,Y,i,p,Z,B,_,ee,te){"use strict";function ae(e){const{modelValue:A,color:c,...g}=e;return a.createVNode(R.Transition,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&a.createVNode("div",a.mergeProps({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},g),null)]})}const L=Q.propsFactory({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...O.makeActivatorProps(),...j.makeComponentProps(),...E.makeDimensionProps(),...h.makeLazyProps(),...P.makeLocationStrategyProps(),...V.makeScrollStrategyProps(),...T.makeThemeProps(),...N.makeTransitionProps()},"VOverlay"),oe=X.genericComponent()({name:"VOverlay",directives:{ClickOutside:J.ClickOutside},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...L()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,A){let{slots:c,attrs:g,emit:m}=A;const le=Y.getCurrentInstance("VOverlay"),y=i.ref(),u=i.ref(),n=i.ref(),I=W.useProxiedModel(e,"modelValue"),o=a.computed({get:()=>I.value,set:t=>{t&&e.disabled||(I.value=t)}}),{themeClasses:ne}=T.provideTheme(e),{rtlClasses:ce,isRtl:se}=U.useRtl(),{hasContent:ie,onAfterLeave:re}=h.useLazy(e,o),ue=F.useBackgroundColor(a.computed(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:v,localTop:x,stackStyles:ve}=K.useStack(o,i.toRef(e,"zIndex"),e._disableGlobalStack),{activatorEl:s,activatorRef:de,target:b,targetEl:fe,targetRef:ge,activatorEvents:me,contentEvents:ye,scrimEvents:be}=O.useActivator(e,{isActive:o,isTop:x,contentEl:n}),{teleportTarget:k}=q.useTeleport(()=>{var r,z,D;const t=e.attach||e.contained;if(t)return t;const l=((r=s==null?void 0:s.value)==null?void 0:r.getRootNode())||((D=(z=le.proxy)==null?void 0:z.$el)==null?void 0:D.getRootNode());return l instanceof ShadowRoot?l:!1}),{dimensionStyles:ke}=E.useDimension(e),Se=G.useHydration(),{scopeId:Pe}=H.useScopeId();a.watch(()=>e.disabled,t=>{t&&(o.value=!1)});const{contentStyles:Ve,updateLocation:M}=P.useLocationStrategies(e,{isRtl:se,contentEl:n,target:b,isActive:o});V.useScrollStrategies(e,{root:y,contentEl:n,targetEl:fe,isActive:o,updateLocation:M});function Oe(t){m("click:outside",t),e.persistent?d():o.value=!1}function Ee(t){return o.value&&v.value&&(!e.scrim||t.target===u.value||t instanceof MouseEvent&&t.shadowTarget===u.value)}p.IN_BROWSER&&a.watch(o,t=>{t?window.addEventListener("keydown",S):window.removeEventListener("keydown",S)},{immediate:!0}),a.onBeforeUnmount(()=>{p.IN_BROWSER&&window.removeEventListener("keydown",S)});function S(t){var l,r;t.key==="Escape"&&v.value&&(e.persistent?d():(o.value=!1,(l=n.value)!=null&&l.contains(document.activeElement)&&((r=s.value)==null||r.focus())))}const he=w.useRouter();C.useToggleScope(()=>e.closeOnBack,()=>{w.useBackButton(he,t=>{v.value&&o.value?(t(!1),e.persistent?d():o.value=!1):t()})});const $=i.ref();a.watch(()=>o.value&&(e.absolute||e.contained)&&k.value==null,t=>{if(t){const l=Z.getScrollParent(y.value);l&&l!==document.scrollingElement&&($.value=l.scrollTop)}});function d(){e.noClickAnimation||n.value&&B.animate(n.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:_.standardEasing})}function we(){m("afterEnter")}function Te(){re(),m("afterLeave")}return ee.useRender(()=>{var t;return a.createVNode(a.Fragment,null,[(t=c.activator)==null?void 0:t.call(c,{isActive:o.value,targetRef:ge,props:a.mergeProps({ref:de},me.value,e.activatorProps)}),Se.value&&ie.value&&a.createVNode(a.Teleport,{disabled:!k.value,to:k.value},{default:()=>[a.createVNode("div",a.mergeProps({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":o.value,"v-overlay--contained":e.contained},ne.value,ce.value,e.class],style:[ve.value,{"--v-overlay-opacity":e.opacity,top:te.convertToUnit($.value)},e.style],ref:y},Pe,g),[a.createVNode(ae,a.mergeProps({color:ue,modelValue:o.value&&!!e.scrim,ref:u},be.value),null),a.createVNode(N.MaybeTransition,{appear:!0,persisted:!0,transition:e.transition,target:b.value,onAfterEnter:we,onAfterLeave:Te},{default:()=>{var l;return[a.withDirectives(a.createVNode("div",a.mergeProps({ref:n,class:["v-overlay__content",e.contentClass],style:[ke.value,Ve.value]},ye.value,e.contentProps),[(l=c.default)==null?void 0:l.call(c,{isActive:o})]),[[R.vShow,o.value],[a.resolveDirective("click-outside"),{handler:Oe,closeConditional:Ee,include:()=>[s.value]}]])]}})])]})])}),{activatorEl:s,scrimEl:u,target:b,animateClick:d,contentEl:n,globalTop:v,localTop:x,updateLocation:M}}});f.VOverlay=oe,f.makeVOverlayProps=L,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
