define(["exports","../../../../vue/dist/vue.runtime.esm-bundler.js","./VOverlay.css.js","./locationStrategies.js","./scrollStrategies.js","./useActivator.js","../../composables/color.js","../../composables/component.js","../../composables/dimensions.js","../../composables/hydration.js","../../composables/lazy.js","../../composables/locale.js","../../composables/proxiedModel.js","../../composables/router.js","../../composables/scopeId.js","../../composables/stack.js","../../composables/teleport.js","../../composables/theme.js","../../composables/toggleScope.js","../../composables/transition.js","../../directives/click-outside/index.js","../../util/index.js","../../../../@vue/runtime-core/dist/runtime-core.esm-bundler.js","../../../../@vue/runtime-dom/dist/runtime-dom.esm-bundler.js","../../util/propsFactory.js","../../util/defineComponent.js","../../util/getCurrentInstance.js","../../../../@vue/reactivity/dist/reactivity.esm-bundler.js","../../util/globals.js","../../util/getScrollParent.js","../../util/animation.js","../../util/easing.js","../../util/useRender.js","../../util/helpers.js"],function(f,Te,Ne,S,P,V,D,F,O,G,E,U,W,h,H,K,q,w,C,T,J,Re,a,N,Q,X,Y,i,R,Z,B,_,ee,te){"use strict";function ae(e){const{modelValue:L,color:n,...g}=e;return a.createVNode(N.Transition,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&a.createVNode("div",a.mergeProps({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},g),null)]})}const p=Q.propsFactory({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...V.makeActivatorProps(),...F.makeComponentProps(),...O.makeDimensionProps(),...E.makeLazyProps(),...S.makeLocationStrategyProps(),...P.makeScrollStrategyProps(),...w.makeThemeProps(),...T.makeTransitionProps()},"VOverlay"),oe=X.genericComponent()({name:"VOverlay",directives:{ClickOutside:J.ClickOutside},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...p()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,L){let{slots:n,attrs:g,emit:m}=L;const le=Y.getCurrentInstance("VOverlay"),y=i.ref(),u=i.ref(),s=i.ref(),A=W.useProxiedModel(e,"modelValue"),o=a.computed({get:()=>A.value,set:t=>{t&&e.disabled||(A.value=t)}}),{themeClasses:se}=w.provideTheme(e),{rtlClasses:ne,isRtl:ce}=U.useRtl(),{hasContent:ie,onAfterLeave:re}=E.useLazy(e,o),ue=D.useBackgroundColor(a.computed(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:v,localTop:I,stackStyles:ve}=K.useStack(o,i.toRef(e,"zIndex"),e._disableGlobalStack),{activatorEl:c,activatorRef:de,target:b,targetEl:fe,targetRef:ge,activatorEvents:me,contentEvents:ye,scrimEvents:be}=V.useActivator(e,{isActive:o,isTop:I,contentEl:s}),{teleportTarget:j}=q.useTeleport(()=>{var r,$,z;const t=e.attach||e.contained;if(t)return t;const l=((r=c==null?void 0:c.value)==null?void 0:r.getRootNode())||((z=($=le.proxy)==null?void 0:$.$el)==null?void 0:z.getRootNode());return l instanceof ShadowRoot?l:!1}),{dimensionStyles:je}=O.useDimension(e),ke=G.useHydration(),{scopeId:Se}=H.useScopeId();a.watch(()=>e.disabled,t=>{t&&(o.value=!1)});const{contentStyles:Pe,updateLocation:x}=S.useLocationStrategies(e,{isRtl:ce,contentEl:s,target:b,isActive:o});P.useScrollStrategies(e,{root:y,contentEl:s,targetEl:fe,isActive:o,updateLocation:x});function Ve(t){m("click:outside",t),e.persistent?d():o.value=!1}function Oe(t){return o.value&&v.value&&(!e.scrim||t.target===u.value||t instanceof MouseEvent&&t.shadowTarget===u.value)}R.IN_BROWSER&&a.watch(o,t=>{t?window.addEventListener("keydown",k):window.removeEventListener("keydown",k)},{immediate:!0}),a.onBeforeUnmount(()=>{R.IN_BROWSER&&window.removeEventListener("keydown",k)});function k(t){var l,r;t.key==="Escape"&&v.value&&(e.persistent?d():(o.value=!1,(l=s.value)!=null&&l.contains(document.activeElement)&&((r=c.value)==null||r.focus())))}const Ee=h.useRouter();C.useToggleScope(()=>e.closeOnBack,()=>{h.useBackButton(Ee,t=>{v.value&&o.value?(t(!1),e.persistent?d():o.value=!1):t()})});const M=i.ref();a.watch(()=>o.value&&(e.absolute||e.contained)&&j.value==null,t=>{if(t){const l=Z.getScrollParent(y.value);l&&l!==document.scrollingElement&&(M.value=l.scrollTop)}});function d(){e.noClickAnimation||s.value&&B.animate(s.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:_.standardEasing})}function he(){m("afterEnter")}function we(){re(),m("afterLeave")}return ee.useRender(()=>{var t;return a.createVNode(a.Fragment,null,[(t=n.activator)==null?void 0:t.call(n,{isActive:o.value,targetRef:ge,props:a.mergeProps({ref:de},me.value,e.activatorProps)}),ke.value&&ie.value&&a.createVNode(a.Teleport,{disabled:!j.value,to:j.value},{default:()=>[a.createVNode("div",a.mergeProps({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":o.value,"v-overlay--contained":e.contained},se.value,ne.value,e.class],style:[ve.value,{"--v-overlay-opacity":e.opacity,top:te.convertToUnit(M.value)},e.style],ref:y},Se,g),[a.createVNode(ae,a.mergeProps({color:ue,modelValue:o.value&&!!e.scrim,ref:u},be.value),null),a.createVNode(T.MaybeTransition,{appear:!0,persisted:!0,transition:e.transition,target:b.value,onAfterEnter:he,onAfterLeave:we},{default:()=>{var l;return[a.withDirectives(a.createVNode("div",a.mergeProps({ref:s,class:["v-overlay__content",e.contentClass],style:[je.value,Pe.value]},ye.value,e.contentProps),[(l=n.default)==null?void 0:l.call(n,{isActive:o})]),[[N.vShow,o.value],[a.resolveDirective("click-outside"),{handler:Ve,closeConditional:Oe,include:()=>[c.value]}]])]}})])]})])}),{activatorEl:c,scrimEl:u,target:b,animateClick:d,contentEl:s,globalTop:v,localTop:I,updateLocation:x}}});f.VOverlay=oe,f.makeVOverlayProps=p,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
