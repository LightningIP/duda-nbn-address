define(["exports","../../../../vue/dist/vue.runtime.esm-bundler.js","./requestNewFrame.js","../../util/index.js","../../util/propsFactory.js","../../util/globals.js","../../../../@vue/runtime-core/dist/runtime-core.esm-bundler.js","../../../../@vue/reactivity/dist/reactivity.esm-bundler.js","../../util/getScrollParent.js","../../util/helpers.js"],function(y,L,p,T,g,E,P,c,a,d){"use strict";const u={none:null,close:w,block:F,reposition:j},k=g.propsFactory({scrollStrategy:{type:[String,Function],default:"block",validator:o=>typeof o=="function"||o in u}},"VOverlay-scroll-strategies");function h(o,r){if(!E.IN_BROWSER)return;let t;P.watchEffect(async()=>{t==null||t.stop(),r.isActive.value&&o.scrollStrategy&&(t=c.effectScope(),await new Promise(l=>setTimeout(l)),t.active&&t.run(()=>{var l;typeof o.scrollStrategy=="function"?o.scrollStrategy(r,o,t):(l=u[o.scrollStrategy])==null||l.call(u,r,o,t)}))}),c.onScopeDispose(()=>{t==null||t.stop()})}function w(o){function r(t){o.isActive.value=!1}S(o.targetEl.value??o.contentEl.value,r)}function F(o,r){var i;const t=(i=o.root.value)==null?void 0:i.offsetParent,l=[...new Set([...a.getScrollParents(o.targetEl.value,r.contained?t:void 0),...a.getScrollParents(o.contentEl.value,r.contained?t:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,n=(e=>a.hasScrollbar(e)&&e)(t||document.documentElement);n&&o.root.value.classList.add("v-overlay--scroll-blocked"),l.forEach((e,m)=>{e.style.setProperty("--v-body-scroll-x",d.convertToUnit(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",d.convertToUnit(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",d.convertToUnit(s)),e.classList.add("v-overlay-scroll-blocked")}),c.onScopeDispose(()=>{l.forEach((e,m)=>{const b=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),f=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),v=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-b,e.scrollTop=-f,e.style.scrollBehavior=v}),n&&o.root.value.classList.remove("v-overlay--scroll-blocked")})}function j(o,r,t){let l=!1,s=-1,n=-1;function i(e){p.requestNewFrame(()=>{var f,v;const m=performance.now();(v=(f=o.updateLocation).value)==null||v.call(f,e),l=(performance.now()-m)/(1e3/60)>2})}n=(typeof requestIdleCallback>"u"?e=>e():requestIdleCallback)(()=>{t.run(()=>{S(o.targetEl.value??o.contentEl.value,e=>{l?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{i(e)})})):i(e)})})}),c.onScopeDispose(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(n),cancelAnimationFrame(s)})}function S(o,r){const t=[document,...a.getScrollParents(o)];t.forEach(l=>{l.addEventListener("scroll",r,{passive:!0})}),c.onScopeDispose(()=>{t.forEach(l=>{l.removeEventListener("scroll",r)})})}y.makeScrollStrategyProps=k,y.useScrollStrategies=h,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"})});
