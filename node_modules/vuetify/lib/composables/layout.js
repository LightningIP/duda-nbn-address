define(["exports","./resizeObserver.js","../../../vue/dist/vue.runtime.esm-bundler.js","../util/index.js","../util/propsFactory.js","../../../@vue/runtime-core/dist/runtime-core.esm-bundler.js","../util/getCurrentInstance.js","../../../@vue/reactivity/dist/reactivity.esm-bundler.js","../util/helpers.js"],function(d,q,st,lt,K,t,O,g,h){"use strict";const L=Symbol.for("vuetify:layout"),P=Symbol.for("vuetify:layout-item"),k=1e3,W=K.propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Y=K.propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function G(){const i=t.inject(L);if(!i)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:i.getLayoutItem,mainRect:i.mainRect,mainStyles:i.mainStyles}}function J(i){const s=t.inject(L);if(!s)throw new Error("[Vuetify] Could not find injected layout");const y=i.id??`layout-item-${O.getUid()}`,c=O.getCurrentInstance("useLayoutItem");t.provide(P,{id:y});const n=g.shallowRef(!1);t.onDeactivated(()=>n.value=!0),t.onActivated(()=>n.value=!1);const{layoutItemStyles:v,layoutItemScrimStyles:r}=s.register(c,{...i,active:t.computed(()=>n.value?!1:i.active.value),id:y});return t.onBeforeUnmount(()=>s.unregister(y)),{layoutItemStyles:v,layoutRect:s.layoutRect,layoutItemScrimStyles:r}}const Q=(i,s,y,c)=>{let n={top:0,left:0,right:0,bottom:0};const v=[{id:"",layer:{...n}}];for(const r of i){const I=s.get(r),b=y.get(r),M=c.get(r);if(!I||!b||!M)continue;const S={...n,[I.value]:parseInt(n[I.value],10)+(M.value?parseInt(b.value,10):0)};v.push({id:r,layer:S}),n=S}return v};function C(i){const s=t.inject(L,null),y=t.computed(()=>s?s.rootZIndex.value-100:k),c=g.ref([]),n=g.reactive(new Map),v=g.reactive(new Map),r=g.reactive(new Map),I=g.reactive(new Map),b=g.reactive(new Map),{resizeRef:M,contentRect:S}=q.useResizeObserver(),B=t.computed(()=>{const o=new Map,l=i.overlaps??[];for(const e of l.filter(u=>u.includes(":"))){const[u,a]=e.split(":");if(!c.value.includes(u)||!c.value.includes(a))continue;const p=n.get(u),m=n.get(a),$=v.get(u),j=v.get(a);!p||!m||!$||!j||(o.set(a,{position:p.value,amount:parseInt($.value,10)}),o.set(u,{position:m.value,amount:-parseInt(j.value,10)}))}return o}),x=t.computed(()=>{const o=[...new Set([...r.values()].map(e=>e.value))].sort((e,u)=>e-u),l=[];for(const e of o){const u=c.value.filter(a=>{var p;return((p=r.get(a))==null?void 0:p.value)===e});l.push(...u)}return Q(l,n,v,I)}),H=t.computed(()=>!Array.from(b.values()).some(o=>o.value)),w=t.computed(()=>x.value[x.value.length-1].layer),_=t.computed(()=>({"--v-layout-left":h.convertToUnit(w.value.left),"--v-layout-right":h.convertToUnit(w.value.right),"--v-layout-top":h.convertToUnit(w.value.top),"--v-layout-bottom":h.convertToUnit(w.value.bottom),...H.value?void 0:{transition:"none"}})),z=t.computed(()=>x.value.slice(1).map((o,l)=>{let{id:e}=o;const{layer:u}=x.value[l],a=v.get(e),p=n.get(e);return{id:e,...u,size:Number(a.value),position:p.value}})),N=o=>z.value.find(l=>l.id===o),T=O.getCurrentInstance("createLayout"),Z=g.shallowRef(!1);t.onMounted(()=>{Z.value=!0}),t.provide(L,{register:(o,l)=>{let{id:e,order:u,position:a,layoutSize:p,elementSize:m,active:$,disableTransitions:j,absolute:ot}=l;r.set(e,u),n.set(e,a),v.set(e,p),I.set(e,$),j&&b.set(e,j);const D=h.findChildrenWithProvide(P,T==null?void 0:T.vnode).indexOf(o);D>-1?c.value.splice(D,0,e):c.value.push(e);const F=t.computed(()=>z.value.findIndex(R=>R.id===e)),V=t.computed(()=>y.value+x.value.length*2-F.value*2),at=t.computed(()=>{const R=a.value==="left"||a.value==="right",A=a.value==="right",ut=a.value==="bottom",U=m.value??p.value,it=U===0?"%":"px",X={[a.value]:0,zIndex:V.value,transform:`translate${R?"X":"Y"}(${($.value?0:-(U===0?100:U))*(A||ut?-1:1)}${it})`,position:ot.value||y.value!==k?"absolute":"fixed",...H.value?void 0:{transition:"none"}};if(!Z.value)return X;const f=z.value[F.value];if(!f)throw new Error(`[Vuetify] Could not find layout item "${e}"`);const E=B.value.get(e);return E&&(f[E.position]+=E.amount),{...X,height:R?`calc(100% - ${f.top}px - ${f.bottom}px)`:m.value?`${m.value}px`:void 0,left:A?void 0:`${f.left}px`,right:A?`${f.right}px`:void 0,top:a.value!=="bottom"?`${f.top}px`:void 0,bottom:a.value!=="top"?`${f.bottom}px`:void 0,width:R?m.value?`${m.value}px`:void 0:`calc(100% - ${f.left}px - ${f.right}px)`}}),nt=t.computed(()=>({zIndex:V.value-1}));return{layoutItemStyles:at,layoutItemScrimStyles:nt,zIndex:V}},unregister:o=>{r.delete(o),n.delete(o),v.delete(o),I.delete(o),b.delete(o),c.value=c.value.filter(l=>l!==o)},mainRect:w,mainStyles:_,getLayoutItem:N,items:z,layoutRect:S,rootZIndex:y});const tt=t.computed(()=>["v-layout",{"v-layout--full-height":i.fullHeight}]),et=t.computed(()=>({zIndex:s?y.value:void 0,position:s?"relative":void 0,overflow:s?"hidden":void 0}));return{layoutClasses:tt,layoutStyles:et,getLayoutItem:N,items:z,layoutRect:S,layoutRef:M}}d.VuetifyLayoutItemKey=P,d.VuetifyLayoutKey=L,d.createLayout=C,d.makeLayoutItemProps=Y,d.makeLayoutProps=W,d.useLayout=G,d.useLayoutItem=J,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
