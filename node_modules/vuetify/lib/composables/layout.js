define(["exports","./resizeObserver","../../../vue/dist/vue.runtime.esm-bundler","../util/index","../util/propsFactory","../../../@vue/runtime-core/dist/runtime-core.esm-bundler","../util/getCurrentInstance","../../../@vue/reactivity/dist/reactivity.esm-bundler","../util/helpers"],function(d,q,lt,st,K,t,P,g,h){"use strict";const L=Symbol.for("vuetify:layout"),T=Symbol.for("vuetify:layout-item"),k=1e3,W=K.propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Y=K.propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function G(){const i=t.inject(L);if(!i)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:i.getLayoutItem,mainRect:i.mainRect,mainStyles:i.mainStyles}}function J(i){const l=t.inject(L);if(!l)throw new Error("[Vuetify] Could not find injected layout");const y=i.id??`layout-item-${P.getUid()}`,c=P.getCurrentInstance("useLayoutItem");t.provide(T,{id:y});const n=g.shallowRef(!1);t.onDeactivated(()=>n.value=!0),t.onActivated(()=>n.value=!1);const{layoutItemStyles:v,layoutItemScrimStyles:r}=l.register(c,{...i,active:t.computed(()=>n.value?!1:i.active.value),id:y});return t.onBeforeUnmount(()=>l.unregister(y)),{layoutItemStyles:v,layoutRect:l.layoutRect,layoutItemScrimStyles:r}}const Q=(i,l,y,c)=>{let n={top:0,left:0,right:0,bottom:0};const v=[{id:"",layer:{...n}}];for(const r of i){const I=l.get(r),b=y.get(r),O=c.get(r);if(!I||!b||!O)continue;const S={...n,[I.value]:parseInt(n[I.value],10)+(O.value?parseInt(b.value,10):0)};v.push({id:r,layer:S}),n=S}return v};function C(i){const l=t.inject(L,null),y=t.computed(()=>l?l.rootZIndex.value-100:k),c=g.ref([]),n=g.reactive(new Map),v=g.reactive(new Map),r=g.reactive(new Map),I=g.reactive(new Map),b=g.reactive(new Map),{resizeRef:O,contentRect:S}=q.useResizeObserver(),B=t.computed(()=>{const o=new Map,s=i.overlaps??[];for(const e of s.filter(u=>u.includes(":"))){const[u,a]=e.split(":");if(!c.value.includes(u)||!c.value.includes(a))continue;const p=n.get(u),m=n.get(a),$=v.get(u),R=v.get(a);!p||!m||!$||!R||(o.set(a,{position:p.value,amount:parseInt($.value,10)}),o.set(u,{position:m.value,amount:-parseInt(R.value,10)}))}return o}),x=t.computed(()=>{const o=[...new Set([...r.values()].map(e=>e.value))].sort((e,u)=>e-u),s=[];for(const e of o){const u=c.value.filter(a=>{var p;return((p=r.get(a))==null?void 0:p.value)===e});s.push(...u)}return Q(s,n,v,I)}),H=t.computed(()=>!Array.from(b.values()).some(o=>o.value)),w=t.computed(()=>x.value[x.value.length-1].layer),_=t.computed(()=>({"--v-layout-left":h.convertToUnit(w.value.left),"--v-layout-right":h.convertToUnit(w.value.right),"--v-layout-top":h.convertToUnit(w.value.top),"--v-layout-bottom":h.convertToUnit(w.value.bottom),...H.value?void 0:{transition:"none"}})),z=t.computed(()=>x.value.slice(1).map((o,s)=>{let{id:e}=o;const{layer:u}=x.value[s],a=v.get(e),p=n.get(e);return{id:e,...u,size:Number(a.value),position:p.value}})),N=o=>z.value.find(s=>s.id===o),V=P.getCurrentInstance("createLayout"),Z=g.shallowRef(!1);t.onMounted(()=>{Z.value=!0}),t.provide(L,{register:(o,s)=>{let{id:e,order:u,position:a,layoutSize:p,elementSize:m,active:$,disableTransitions:R,absolute:ot}=s;r.set(e,u),n.set(e,a),v.set(e,p),I.set(e,$),R&&b.set(e,R);const D=h.findChildrenWithProvide(T,V==null?void 0:V.vnode).indexOf(o);D>-1?c.value.splice(D,0,e):c.value.push(e);const F=t.computed(()=>z.value.findIndex(M=>M.id===e)),j=t.computed(()=>y.value+x.value.length*2-F.value*2),at=t.computed(()=>{const M=a.value==="left"||a.value==="right",A=a.value==="right",ut=a.value==="bottom",U=m.value??p.value,it=U===0?"%":"px",X={[a.value]:0,zIndex:j.value,transform:`translate${M?"X":"Y"}(${($.value?0:-(U===0?100:U))*(A||ut?-1:1)}${it})`,position:ot.value||y.value!==k?"absolute":"fixed",...H.value?void 0:{transition:"none"}};if(!Z.value)return X;const f=z.value[F.value];if(!f)throw new Error(`[Vuetify] Could not find layout item "${e}"`);const E=B.value.get(e);return E&&(f[E.position]+=E.amount),{...X,height:M?`calc(100% - ${f.top}px - ${f.bottom}px)`:m.value?`${m.value}px`:void 0,left:A?void 0:`${f.left}px`,right:A?`${f.right}px`:void 0,top:a.value!=="bottom"?`${f.top}px`:void 0,bottom:a.value!=="top"?`${f.bottom}px`:void 0,width:M?m.value?`${m.value}px`:void 0:`calc(100% - ${f.left}px - ${f.right}px)`}}),nt=t.computed(()=>({zIndex:j.value-1}));return{layoutItemStyles:at,layoutItemScrimStyles:nt,zIndex:j}},unregister:o=>{r.delete(o),n.delete(o),v.delete(o),I.delete(o),b.delete(o),c.value=c.value.filter(s=>s!==o)},mainRect:w,mainStyles:_,getLayoutItem:N,items:z,layoutRect:S,rootZIndex:y});const tt=t.computed(()=>["v-layout",{"v-layout--full-height":i.fullHeight}]),et=t.computed(()=>({zIndex:l?y.value:void 0,position:l?"relative":void 0,overflow:l?"hidden":void 0}));return{layoutClasses:tt,layoutStyles:et,getLayoutItem:N,items:z,layoutRect:S,layoutRef:O}}d.VuetifyLayoutItemKey=T,d.VuetifyLayoutKey=L,d.createLayout=C,d.makeLayoutItemProps=Y,d.makeLayoutProps=W,d.useLayout=G,d.useLayoutItem=J,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
