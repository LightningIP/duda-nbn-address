define(["exports","../../util/index.js","../../util/dom.js"],function(n,k,i){"use strict";function l(){return!0}function d(t,o,e){if(!t||a(t,e)===!1)return!1;const s=i.attachedRoot(o);if(typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&s.host===t.target)return!1;const u=(typeof e.value=="object"&&e.value.include||(()=>[]))();return u.push(o),!u.some(c=>c==null?void 0:c.contains(t.target))}function a(t,o){return(typeof o.value=="object"&&o.value.closeConditional||l)(t)}function v(t,o,e){const s=typeof e.value=="function"?e.value:e.value.handler;t.shadowTarget=t.target,o._clickOutside.lastMousedownWasOutside&&d(t,o,e)&&setTimeout(()=>{a(t,e)&&s&&s(t)},0)}function r(t,o){const e=i.attachedRoot(t);o(document),typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&o(e)}const f={mounted(t,o){const e=u=>v(u,t,o),s=u=>{t._clickOutside.lastMousedownWasOutside=d(u,t,o)};r(t,u=>{u.addEventListener("click",e,!0),u.addEventListener("mousedown",s,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[o.instance.$.uid]={onClick:e,onMousedown:s}},beforeUnmount(t,o){t._clickOutside&&(r(t,e=>{var c;if(!e||!((c=t._clickOutside)!=null&&c[o.instance.$.uid]))return;const{onClick:s,onMousedown:u}=t._clickOutside[o.instance.$.uid];e.removeEventListener("click",s,!0),e.removeEventListener("mousedown",u,!0)}),delete t._clickOutside[o.instance.$.uid])}};n.ClickOutside=f,n.default=f,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
