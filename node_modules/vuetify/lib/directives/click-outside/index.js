define(["exports","../../util/index","../../util/dom"],function(s,k,i){"use strict";function l(){return!0}function d(t,o,e){if(!t||a(t,e)===!1)return!1;const c=i.attachedRoot(o);if(typeof ShadowRoot<"u"&&c instanceof ShadowRoot&&c.host===t.target)return!1;const u=(typeof e.value=="object"&&e.value.include||(()=>[]))();return u.push(o),!u.some(n=>n==null?void 0:n.contains(t.target))}function a(t,o){return(typeof o.value=="object"&&o.value.closeConditional||l)(t)}function v(t,o,e){const c=typeof e.value=="function"?e.value:e.value.handler;t.shadowTarget=t.target,o._clickOutside.lastMousedownWasOutside&&d(t,o,e)&&setTimeout(()=>{a(t,e)&&c&&c(t)},0)}function r(t,o){const e=i.attachedRoot(t);o(document),typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&o(e)}const f={mounted(t,o){const e=u=>v(u,t,o),c=u=>{t._clickOutside.lastMousedownWasOutside=d(u,t,o)};r(t,u=>{u.addEventListener("click",e,!0),u.addEventListener("mousedown",c,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[o.instance.$.uid]={onClick:e,onMousedown:c}},beforeUnmount(t,o){t._clickOutside&&(r(t,e=>{var n;if(!e||!((n=t._clickOutside)!=null&&n[o.instance.$.uid]))return;const{onClick:c,onMousedown:u}=t._clickOutside[o.instance.$.uid];e.removeEventListener("click",c,!0),e.removeEventListener("mousedown",u,!0)}),delete t._clickOutside[o.instance.$.uid])}};s.ClickOutside=f,s.default=f,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
